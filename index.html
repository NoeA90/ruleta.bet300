<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BET300 Â· Ruleta de Bonos</title>
<meta name="theme-color" content="#0b0f1e"/>
<style>
:root{
  --bg:#0b0f1e; --panel:#121634; --panel2:#0f1330; --border:#1e2150;
  --text:#e8ebff; --muted:#b7b9d6; --ok:#25D366; --pointer:#22d3ee;
  --alert:#ffcc00; --danger:#ff6b6b;
}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;color:var(--text);background:var(--bg);font:16px/1.35 system-ui,-apple-system,Segoe UI,Roboto}
body::before{
  content:"";position:fixed;inset:0;z-index:-2;
  background: radial-gradient(900px 500px at 50% -10%, rgba(101,74,255,.25), transparent),
              radial-gradient(700px 350px at 100% 0%, rgba(0,209,255,.18), transparent),
              linear-gradient(180deg,#0b0f1e 0%,#0b0f1e 60%,#0a0d20 100%);
}
.bg{position:fixed;inset:0;z-index:-3;opacity:.24;object-fit:cover;width:100%;height:100%}

/* contenedor general */
.container{max-width:980px;margin:0 auto;padding:18px 14px 28px}
.card{
  background: radial-gradient(120% 100% at 50% 0%, rgba(124,77,255,.08), rgba(0,0,0,0)) , var(--panel2);
  border:1px solid var(--border);border-radius:18px;padding:18px;box-shadow:0 15px 40px rgba(0,0,0,.35)
}
@media (max-width:520px){
  .container{padding:0}
  .card{border-radius:0;border-left:0;border-right:0;padding:14px}
}

.head{display:flex;align-items:center;gap:10px;margin-bottom:8px;flex-wrap:wrap}
.brand{height:28px;width:auto;filter:drop-shadow(0 2px 8px rgba(0,0,0,.4))}
.pill{
  background:linear-gradient(90deg,rgba(124,77,255,.15),rgba(0,209,255,.15));
  border:1px solid var(--border); border-radius:999px; padding:6px 10px; font-size:12px; color:var(--muted)
}
/* tiempo limitado + contador */
.pill.time{display:flex;align-items:center;gap:8px}
.count{
  display:inline-flex;align-items:center;gap:6px;
  padding:4px 8px;border-radius:999px;
  background:rgba(255,204,0,.15);border:1px solid rgba(255,204,0,.35);
  color:#ffe27a;font-weight:700;font-variant-numeric:tabular-nums;
}

.grid{display:grid;gap:16px;grid-template-columns:minmax(0,1fr)}
@media(min-width:900px){.grid{grid-template-columns:1.15fr .85fr}}

.stage{position:relative;display:flex;align-items:center;justify-content:center}
.wrap{width:100%;max-width:520px;margin:auto}
canvas{width:100%;height:auto;display:block}

/* Indicador (triÃ¡ngulo) */
.pointer{
  position:absolute; top:6px; left:50%; transform:translateX(-50%);
  width:0; height:0;
  border-left: 16px solid transparent;
  border-right:16px solid transparent;
  border-bottom:26px solid var(--pointer);
  filter: drop-shadow(0 4px 10px rgba(34,211,238,.35));
  z-index:2;
}
@media (max-width:420px){
  .pointer{ border-left:12px solid transparent; border-right:12px solid transparent; border-bottom:22px solid var(--pointer); top:4px; }
}

.panel{background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:16px}
.center{text-align:center}
h1,h2,h3,p{margin:0 0 8px} h1{font-size:24px} .muted{color:var(--muted)}
.stat{display:flex;align-items:center;gap:12px;justify-content:center;margin:8px 0 14px}
.badge{
  min-width:72px;height:46px;border-radius:12px;
  background:radial-gradient(100% 100% at 50% 0%, rgba(0,209,255,.35), rgba(124,77,255,.35));
  display:grid;place-items:center;font-weight:800;font-size:18px;box-shadow:inset 0 0 10px rgba(124,77,255,.35)
}
.row{display:flex;gap:10px}
.btn{
  appearance:none;border:none;cursor:pointer;padding:12px 16px;border-radius:12px;font-weight:700;
  background:linear-gradient(90deg,#6c59ff,#00d1ff);color:#0a1020;width:100%;box-shadow:0 8px 20px rgba(0,0,0,.35)
}
.btn.secondary{background:#1a1f4a;color:var(--text);border:1px solid var(--border)}
.btn:disabled{opacity:.55;cursor:not-allowed}
.btn.ok{background:var(--ok);color:#0b0f1e}

/* Promo bloque */
.promo{
  display:grid;
  grid-template-columns: 1fr minmax(200px, 260px);
  align-items:center;
  gap:12px;
  margin-top:10px;
  padding:12px;
  border:1px dashed var(--border);
  border-radius:12px;
  background:linear-gradient(180deg,rgba(255,204,0,.07),rgba(0,0,0,0));
}
.promo .copy{display:grid;gap:4px}
.btn.play{
  display:inline-flex; align-items:center; justify-content:center; gap:10px;
  padding:14px 16px; border-radius:12px; font-weight:800;
  background:linear-gradient(90deg,#ffd166,#ff7ab6); color:#0a1020;
  text-align:center;
}
@media (max-width:520px){
  .promo{grid-template-columns:1fr; gap:10px}
  .btn.play{width:100%}
}
</style>
</head>
<body>
<img class="bg" src="img/bg-casino.webp" alt="" />

<div class="container">
  <div class="card">
    <div class="head">
      <img class="brand" src="img/logo-bet300.svg" alt="BET300">
      <span class="pill">Ruleta de bonos Â· se acredita con la prÃ³xima carga</span>
      <span class="pill time">âš¡ Tiempo limitado
        <span class="count" id="countdown">--:--</span>
      </span>
    </div>

    <div class="grid">
      <div class="panel">
        <div class="stage">
          <div class="wrap"><canvas id="wheel" width="620" height="620"></canvas></div>
          <div class="pointer" aria-hidden="true"></div>
        </div>
      </div>

      <div class="panel">
        <div class="center">
          <div class="stat">
            <div class="badge" id="badge">0%</div>
            <div>
              <h1 id="title">TenÃ©s 1 giro disponible</h1>
              <p class="muted" id="subtitle">Los bonos se acreditan con tu <b>prÃ³xima carga mÃ­nima</b>.</p>
            </div>
          </div>
        </div>

        <div class="row" style="margin-top:8px">
          <button id="spinBtn" class="btn">ðŸŽ¯ Girar ruleta</button>
        </div>

        <button id="claimBtn" class="btn ok" style="margin-top:10px" disabled>ðŸ“² Reclamar por WhatsApp</button>

        <div class="promo" id="promoBox">
          <div class="copy">
            <strong>Bonos especiales por tiempo limitado.</strong>
            <span class="muted">AccedÃ© ahora y participÃ¡ antes de que termine.</span>
          </div>
          <a id="playNow" class="btn play" target="_blank" rel="noopener">
            ðŸŽ® Entrar a la plataforma
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
/* ========= Config ========= */
const AMOUNTS = [15,20,25,30,35,40,45,50]; // porcentajes
const COLORS  = ["#44e0ff","#7a5bff","#16e2b6","#ff6ad5","#ffd166","#4be1a0","#8ab6ff","#ff9bd1"];
const WP_NUMBERS = { principal: "5491157737173" };
const WP_MSG = "Hola, ganÃ© %AMOUNT%% en fichas extra en la ruleta y quiero reclamarlo con mi prÃ³xima carga.";

/* ========= Estado ========= */
const wheel    = document.getElementById('wheel');
const ctx      = wheel.getContext('2d');
const spinBtn  = document.getElementById('spinBtn');
const claimBtn = document.getElementById('claimBtn');
const badge    = document.getElementById('badge');
const title    = document.getElementById('title');
const subtitle = document.getElementById('subtitle');

let angle = 0, spinning = false, prize = null, cx, cy, r, cssW = 0;

/* Canvas responsive */
function setSize(){
  const dpr = window.devicePixelRatio || 1;
  const w = Math.min(520, Math.max(280, window.innerWidth*0.9));
  cssW = w;
  wheel.width  = Math.floor(w * dpr);
  wheel.height = Math.floor(w * dpr);
  wheel.style.width  = w + 'px';
  wheel.style.height = w + 'px';
  ctx.setTransform(dpr,0,0,dpr,0,0);
  cx = wheel.width/dpr/2; cy = wheel.height/dpr/2; r = Math.min(cx,cy) - 10;
  draw(angle);
}
window.addEventListener('resize', ()=>setTimeout(setSize,100));

/* Dibujo ruleta */
function draw(a){
  ctx.clearRect(0,0,wheel.width,wheel.height);
  const n = AMOUNTS.length; const arc = Math.PI*2/n;
  ctx.font = "700 26px system-ui";

  for(let i=0;i<n;i++){
    const s = a + i*arc, e = s + arc;
    ctx.beginPath(); ctx.moveTo(cx,cy); ctx.arc(cx,cy,r,s,e); ctx.closePath();
    ctx.fillStyle = COLORS[i % COLORS.length]; ctx.fill();

    const label = AMOUNTS[i]+"%";
    ctx.save(); ctx.translate(cx,cy); ctx.rotate(s + arc/2);
    ctx.textAlign="right"; ctx.fillStyle="#091024";
    ctx.fillText(label, r-20, 12); ctx.restore();
  }
}

/* Premio ganador por posiciÃ³n */
function normAngle(rad){ return ((rad % (2*Math.PI)) + (2*Math.PI)) % (2*Math.PI); }
function winnerIndexByAngle(a){
  const n=AMOUNTS.length, arc=Math.PI*2/n, pointer=Math.PI*1.5;
  let best=0,dist=1e9;
  for(let i=0;i<n;i++){
    const center=normAngle(a+i*arc+arc/2);
    let d=Math.abs(normAngle(center-pointer));
    if(d>Math.PI) d=(Math.PI*2)-d;
    if(d<dist){dist=d;best=i;}
  }
  return best;
}

/* Spin */
spinBtn.addEventListener('click', ()=>{
  if(spinning) return;
  spinning = true; spinBtn.disabled=true;

  const final = angle + (Math.PI*2*(5+Math.random()*1.5)) + (Math.random()*Math.PI*2);
  const start=performance.now(), from=angle;

  (function anim(t){
    const k=Math.min(1,(t-start)/3000);
    const ease=1-Math.pow(1-k,3);
    angle=from+(final-from)*ease; draw(angle);
    if(k<1) requestAnimationFrame(anim); else {
      const idx=winnerIndexByAngle(angle);
      const win=AMOUNTS[idx]; setWon(win);
      spinning=false;
    }
  })(start);
});

/* Set resultado */
function setWon(amount){
  badge.textContent=amount+"%";
  title.textContent="ðŸŽ‰ Â¡Premio obtenido!";
  subtitle.innerHTML=`RecibÃ­s un <b>${amount}% extra</b> con tu prÃ³xima carga.`;
  claimBtn.disabled=false;
  const msg = WP_MSG.replace("%AMOUNT%", amount);
  claimBtn.onclick=()=>location.href=`https://wa.me/${WP_NUMBERS.principal}?text=${encodeURIComponent(msg)}`;
}

/* Init */
setSize();
</script>
</body>
</html>
